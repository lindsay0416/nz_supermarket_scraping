"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const events_1 = __importDefault(require("events"));
class NativeRefreshEventsHandlerService extends events_1.default {
    constructor(actionPermissionService, usersPermissionService, renderingPermissionService) {
        super();
        this.actionPermissionService = actionPermissionService;
        this.usersPermissionService = usersPermissionService;
        this.renderingPermissionService = renderingPermissionService;
    }
    refreshUsers() {
        this.usersPermissionService.invalidateCache();
    }
    refreshRoles() {
        this.actionPermissionService.invalidateCache();
    }
    refreshRenderings(renderingIds) {
        for (const renderingId of renderingIds)
            this.renderingPermissionService.invalidateCache(renderingId);
    }
    refreshCustomizations() {
        this.emit('RefreshCustomizations');
    }
    refreshEverything() {
        this.usersPermissionService.invalidateCache();
        this.actionPermissionService.invalidateCache();
        this.renderingPermissionService.invalidateAllCache();
        // Emit RefreshCustomizations event
        this.emit('RefreshCustomizations');
    }
}
exports.default = NativeRefreshEventsHandlerService;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmF0aXZlLXJlZnJlc2gtZXZlbnRzLWhhbmRsZXItc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9ldmVudHMtc3Vic2NyaXB0aW9uL25hdGl2ZS1yZWZyZXNoLWV2ZW50cy1oYW5kbGVyLXNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxvREFBa0M7QUFPbEMsTUFBcUIsaUNBQ25CLFNBQVEsZ0JBQVk7SUFHcEIsWUFDbUIsdUJBQWdELEVBQ2hELHNCQUE2QyxFQUM3QywwQkFBc0Q7UUFFdkUsS0FBSyxFQUFFLENBQUM7UUFKUyw0QkFBdUIsR0FBdkIsdUJBQXVCLENBQXlCO1FBQ2hELDJCQUFzQixHQUF0QixzQkFBc0IsQ0FBdUI7UUFDN0MsK0JBQTBCLEdBQTFCLDBCQUEwQixDQUE0QjtJQUd6RSxDQUFDO0lBRU0sWUFBWTtRQUNqQixJQUFJLENBQUMsc0JBQXNCLENBQUMsZUFBZSxFQUFFLENBQUM7SUFDaEQsQ0FBQztJQUVNLFlBQVk7UUFDakIsSUFBSSxDQUFDLHVCQUF1QixDQUFDLGVBQWUsRUFBRSxDQUFDO0lBQ2pELENBQUM7SUFFTSxpQkFBaUIsQ0FBQyxZQUFpQztRQUN4RCxLQUFLLE1BQU0sV0FBVyxJQUFJLFlBQVk7WUFDcEMsSUFBSSxDQUFDLDBCQUEwQixDQUFDLGVBQWUsQ0FBQyxXQUFXLENBQUMsQ0FBQztJQUNqRSxDQUFDO0lBRU0scUJBQXFCO1FBQzFCLElBQUksQ0FBQyxJQUFJLENBQUMsdUJBQXVCLENBQUMsQ0FBQztJQUNyQyxDQUFDO0lBRU0saUJBQWlCO1FBQ3RCLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxlQUFlLEVBQUUsQ0FBQztRQUM5QyxJQUFJLENBQUMsdUJBQXVCLENBQUMsZUFBZSxFQUFFLENBQUM7UUFDL0MsSUFBSSxDQUFDLDBCQUEwQixDQUFDLGtCQUFrQixFQUFFLENBQUM7UUFFckQsbUNBQW1DO1FBQ25DLElBQUksQ0FBQyxJQUFJLENBQUMsdUJBQXVCLENBQUMsQ0FBQztJQUNyQyxDQUFDO0NBQ0Y7QUFyQ0Qsb0RBcUNDIn0=